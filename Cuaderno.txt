###Pintar diagrama flujo


###Data Adquisition-Data Pre-Processing-Machine Algo-Pattern evaluation-Knowledge Representation
###                               - Data analysis/Representation

### Cuentas:

  # André: https://steamcommunity.com/profiles/76561198012006378/games/?tab=all
  # Jolas: https://steamcommunity.com/profiles/76561197987441240/games/?tab=all
  # Jolas: https://steamcommunity.com/id/guayabazo/games/?tab=all
  # Álvaro: https://steamcommunity.com/profiles/76561197992225029/games/?tab=all
  # Jimmy: https://steamcommunity.com/profiles/76561198124010932/games/?tab=all
  # Álvaro: https://steamcommunity.com/profiles/76561198114943073/games/?tab=all
  # Álvaro: https://steamcommunity.com/id/DuckSaucer77/games/?tab=all
  # Mío: https://steamcommunity.com/profiles/76561198118578417/games/?tab=all
  # Mío: https://steamcommunity.com/id/marko_pakete/games/?tab=all

### Paginas interés:

#https://github.com/Depressurizer/Depressurizer/releases
#https://github.com/Twombs/Steam-Games-List
#https://www.kaggle.com/datasets/ca06934a676693b069bc319eb7c76647afbcf8019dc4828cabb50678a064f3ff BAJAR METADATO
#https://github.com/Duerkos/steam_analysis BAJAR METADATA
#https://github.com/scjustice/steam_webscraper EL SCRAPPER PRO
#https://steamdb.info/faq/#how-are-we-getting-this-information LISTA BUENA DE SCRIPTS
#https://developer.valvesoftware.com/wiki/SteamCMD App importante de VALVE para usar steam desde comando
#https://github.com/mdeguzis/steamcmd-wrapper
#https://github.com/dgibbs64/SteamCMD-AppID-List This repo stores every AppID and its name available on Steam as json, CSV, xml and MD table by grabbing the info from the SteamAPI.
### Pillar AppID
### Más info: https://partner.steamgames.com/doc/webapi/ISteamApps#GetAppList
### Cuándo se activaron los juegos: https://store.steampowered.com/account/licenses/
#https://medium.com/@senchooo/scraping-all-game-in-steam-using-python-e9f0ad206add
#https://github.com/woctezuma/steamspypi/issues/10
#https://developer.valvesoftware.com/wiki/Steam_Web_API
#https://steamcommunity.com/dev/apikey
#https://partner.steamgames.com/doc/webapi_overview?l=spanish#1

Por hacer:

Proyecto 1
X - Problema con desconexión, se pierde un match (regular el valor de "i")
- Buscar el hit por similarity?
    X - Problemas con los ":"
    X - Algunos no se encuentan porque aparecen escritos de forma similar. Problemas con Complete o Remaster
    X - Problema con juegos como Trine 2, no es el mismo orden

X - Completar el mayor número de NA posibles
- Descargar otros metadatos. Género, Calidad, fecha lanzamiento...
- Integrar
X - Qué hacer con los que acaban con un espacio...quitar el espacio? (Need for Speed Heat)
X - Warhammer 40,000 no sale bien, me cargo las ","
X - Probar el archivo solo con las últimas lineas de "Game.txt", que no tenga que quitarlas a mano
X - Quitar simbolos especiales del Game.txt, pero mantener en una columna el nombre original

- Juegos con logros más rápidos/sencillos: diferencia menor de tiempo entre completacionista y base, se puede relativizar a tiempo de juego base y se genera un índice (cuanto más alto mejor)
- Etiqueta de "Tiempo en completarlo/logros", "Removed", "Géneros", "Completado", "Puntuación en %", "Fecha salida", "Cuándo se compró"

Proyecto 2
Visualizar datos
  - Summary datos: Número de juegos, tiempo total de juego, tiempo medio de juego, conteo de generos, puntuación media y desviación, número de juegos por develop y publisher
  - Gráficas: Distribución de juegos por tiempo de completación. Correlación entre tiempo de juego y logreo, puntuación...correlación pairwiese entre todas las variables (plot). Gráfico de puntuación de juegos. DonutPie de generos y subdivisión en tiempo/puntuación. Mapa nombre de juegos en función de género, puntuación y tiempo de juego.
  - Integración varios usuarios. Mapa con variables que sean los juegos (con sus características) 

Proyecto 3
Recomendación juegos
- Unsupervised, clusters en función de parámetros

Proyecto 4
Recomendación de compra
- Con SteamSpy se ve el precio del juego y su posible descuento


4-12-22

- Arreglado los caracteres con TM y los ü
- Agrega info de Completationist

La info de Completationist no la coge bien en la tabla, arreglar...

5-12-22

- Eliminado los duplicados que aparecen con espacios
- Puestos tiempos de juego base y completacionista en una sola línea
- Eliminado lo de que aparezca el nombre del juego dos veces

6-12-22

- No se salta un elemento de la lista cuando hay error, la recorremos con un While. 
- Comprueba que el archivo Game.txt existe, no vuelve a descargar el archivo desde Steam.
- Busca también coincidencias cercanas, apunta cuales pasan por exactas y cuales no
- elimina todos los "\u{4}" 
- Quita también los | 

7-12-22

- Grandes cambios.
  - Se filtran los resultados y se coge el de mayor similitud, no el primero.
  - Se han hecho varios cambios de control de filtrado de información para evitar problemas al procesas el dato.
  - Esto soluciona el problema de Trine 2 y similares

8-12-22

- Modificación grande para los ":", no va bien del todo...ver por qué algunos se abren...monitorear durante ejecución

9-12-22

- Fallaba por cómo se gestiona "&". Sigue fallando con el cambio que tiene hecho, modificarlo (tiene que estar) y ver si a los juegos que tienen "Collector's edition" etc les afecta y se arregla al cortar esa cola
- Nueva forma del pasted, pero fallan otros juegos como "Mount & Blade: With Fire and Sword". Ver qué pasa, antes iba...Probar también Red Comrades Save the Galaxy: Reloaded

10-12-22

- Mount & Blade arreglado, Red Comrades no. Quitar ":" y "-" en la próxima versión
- SEGA Mega Drive & Genesis Classics

11-12-22

- Arreglado los problemas, los NA solucionados. Ver cómo limitar los falsos positivos

12-12-22

- Hay que revisar el xls, vamos por el 200 de los no match
- Voy por el 400
- Arreglado los problemas con "Reload" y "Collection". Se han dejado, el único collection que se ha modificado es el "Sonic Transformed Collection".
- Arreglado los casos en que no se daba el hit y se intentaba poner ":", no se ponía bien en esta versión y solo buscaba la primera palabra.
- Parece que se ha mejorado todo lo que había que mirar, revisar la lista de los NA y los No Exact a ver qué se puede apurar...
- Quedan muy pocos en No Exact, se han ido mucho a NA...por ejemplo PUBG, estaba bien. Comparar el V3 y V4!

13-12-22

- Si no encuentra hit, mirar si tiene Disney al principio. Si lo tiene, quitarlo.
- Si no encuentra nada, después de poner ":", buscar solo la primera palabra...si solo hay un hit, guardarlo.
- Las dos cosas ya funcionan
- Arreglar: Saw, Monaco, Resident Evil 0, Age of Empires II (2013), ARCADE GAME SERIES: PAC-MAN: 1h 3h Ms. Pac-Man. Entran en Exact pero no deberían, corregir esa parte del código para que solo guarde los exactos 100%.
- No se cortan bien los nombres para generar Games.txt. Problemas con el juego anterior a: "Aesthetic World", "F1 Race Stars"
- Arreglado el recorte de los nombres. Ahora no aparecen nombres duplicados, se puede eliminar esa parte de código! Además los dos de arriba ya aparecen bien.
- Generamos el V5, comparar con V3 y V4, a ver cuántos se han solucionado.
- Hay mucho Exact que no está bien...mirar los que están en la línea 4, a ver qué se puede hacer..contar los problemas que hay! El V6 será la versión donde los exact sean exact perfectos...ahí caerán los :, '...mirar bien
- Enhanced edition habría que dejarlo...cuál más dejar? Ver cuántos hay de casa caso, dejar un archivo Game.txt con todos ellos (sacar con un grep)

14-12-22

- Algun cambio más. Dejamos las ENhanced y las Definitive, pero lo recortamos si no encontramos nada
- Vamos a poner para que los Exact sean Exact. "My Destiny"	no puede dar "My Jigsaw Adventures - Forgotten Destiny". Cribamos por similaridad >0.925
- Cambiadas algunas cosas del preprocesado
- Seguimos metiendo cambios, y ahora dejamos algunas cosas y las quitamos solo cuando el algoritmo no encuentre nada, forzándolo...no hacer desde un principio porque en un principio, si queremos probar a poner ":" ya deberíamos haber procesado un mínimo el nombre
- En próxima versión intentar quitar los número que esté en medio de un nombre, no se leen
- Red Comrades Save the Galaxy: Reloaded vuelve a fallar...?

15-12-22

- Metido los cambios para eliminar los números que estén en el centro, va bien por ejemplo para Broken Sword 3

16-12-22

- Comprobar: "Castlevania: Lords of Shadow - Ultimate Edition: 2h 4h Castlevania: Lords of Shadow - Reverie DLC"
- Los juegos como Resident evil 0 o Age of Empires II quizá podrían solucionarse poniendo ":" al final. Saw y Monaco podría comprobarse si tienen similaridad 1, si no añadir ":" al final.
- Ahora fall "Event[0]", no quitar "[" si encuentra algo antes
- PUBG vuelve a fallar!!! por qué! arreglar!

19-12-22

- Varias mejoras para rescatar NA, como números romanos, : sin espacios y que no se iba guardando de forma gradual la eliminación de caracteres o expresiones. Comparar este resultado con el de V8...
- Aún queda hacer lo de SAW. Cuando sea una paralabra debe buscarse similitud 100%
- Está mucho mejor el 9, mirar bien los non-exact y solventar problemas de juegos de arriba

20-12-22

- Aún quedna por resolver puntos anteriores, mirar
- Avanzamos con la búsqueda de metadatos. Escritos scripts: Updates_Principales.R, GatherData_Steam_NOUSAR.py y AppID_from_name_NOUSAR.sh (estos no usar). Bajamos toda la info de AppID del archivo que se ve en ese script de R, matcheamos por nombre a nuesta tabla y luego vamos a buscar la info por AppID desde SteamSpy

21-12-22

- Procesamos los datos del HTML y llamamos al Spy...pero va muy lento, la primera parte donde tengo todos los AppIDs posibles hay que quiarle el "for" y ponerlo con sapply.
- El nuevo proceso coge bien los AppID y los busca en SteamSpy!! Va bien, pero errores al procesar el archivo inicial...no procesar por : porque perdemos info!
- Cuando coja desde un AppID, que mire bien si tiene los campos. Un mismo juego puede aparecer con dos AppID y uno estar vacío y por tanto sobrescribir el bueno
- Coge bien info, pero no se descarga por completo la base de datos de AppID...meterla en un bucle a que se descargue entera? 
- Otro como Saw y Monaco: "Candle"
- Aparece "Gloom" duplicado en la tabla, la lía!!!! Ver si tengo dos Gloom, dejar de quiatar nombres duplicados (ya no hace falta)

25-12-22

- Arreglado Monaco y Candle. Saw es complicado, lo dejamos como NA, perdemos ese valor (por ahora)
- Parece que también arreglado Resident Evil 0 y Age of Empires II
- Todo el día intentando arreglar los juegos que son una sola palabra y daban falsos positivos:
  RiMe
  Watch_Dogs
  Sig_Null
  Contagion
  Resident Evil 0
  Candle
  RiMe
  UltraGoodness
  BioShock
  Symphony
  140
  OR
  ShapeShifter
  Unhack
  RIVE
  CHUCHEL
  WASTED
  Nongünz
  Monaco
  Saw
  Resident Evil 0
  Age of Empires II (hola)
- Mañana arreglar el primer paso donde se guardan nombres con caracteres especiales. Con el paquete "stringi::stri_trans_general(x, "Hangul-Latin")" pueden pasarse los caracteres que son "\uxxx" a su carácter especial, no hace falta que se guarde un archivo extra.
- Faltan algunos que fallan, por ejemplo ABZÛ no sale bien por el caracter especial. Arreglarlo.
- The Darkness II no va bien, arreglar
- Ver nuevo1.txt
- Si se guarda de esta forma el Game.txt, no se puede cargar luego bien. No se guarda el Spyto con el TM bien. Las líneas que van después de Ifrit no funcionan bien...mirar!!

26-12-22

- Sigue el problema de Spyro, problemas con \...además problemas con juegos como PAYDAY 2, que añade automáticamente : y encuentra otra cosa. Arreglar.

27-12-22

- TOdo Ok. Siguen habiendo falsos positivos pero la mayoría de NA están arreglados. Mañana correr todo full y explorar el "HowLong"

28-12-22

- Tenemos tabla final con HowLong. Explorar, arreglar algunos como Event[0]

29-12-22

- Tenemos una versión muy avanzada. Ahora ordenar la tabla por NA en horas y NA en info de SteamSpy. Coger los jeugos de ambas columnas y buscar patrones. Luego coger columna de % de match con How long, intentar depurar este punto.
- Resident Evil 0 y Ages of Empires II vuelven a tener su problema.

01-01-23

- Arreglados errores que estaban listados, como Resident Evil 0, Ages of Empires II, Event[0]...

08-01-23

- Arreglados problemas con juegos con " ' ", número romanos...
- Arreglado el bucle del while, ya no es un +30 si no que hay una variable que lo controla con una sola interacción
- La búsqueda del tunning está controlada con un while. Hasta que salga un resultado está buclado.
- El orden al generar la columna 7 del archivo es diferente...hacer de otra forma!! Ver bien cuando se consiga una ejecución completa
- Rescatar Watch Dogs??

09-01-23

- Revisar lo de quitar ":" antes y después de hacer el bucle de poner los : a lo largo de toda la búsqueda. Todo OK, no se modifica el nombre cuando se modifica : a lo largo de la búsqueda
- Para futuro, actualizar el "Game_buscar" con los últimos juegos incluidos
- Seguro que no se puede generar el 7 desde el 1?
- El archivo que descargamos tiene info del AppID!! Coger este campo y hacer el match a partir de aquí para SteamSpy, más fiable (campo único). Esto soluciona juegos como "Magic 2015". Haciendo esto no hace falta correr de nuevo el script para descargar la info en la columna 7, aquí guardaremos el AppID y nos quedaremos con el valor de nombre que saquemos...evitamos problemas, ya no bailarán los nombres. Para esto, los que se queden vacíos en 1 que no se rellenen con el campo del 7...
- Añadir info de los juego que están logreados al 100%: "https://steamcommunity.com/id/marko_pakete/games/?tab=perfect"
- Caído el enlace de info total de juegos de Steam? Por la mañana iba. Ya va, tener en cuenta que puede caerse de vez en cuando
- Mirar: "Resident Evil 2 \1-Shot Demo\", "Thief 2", "Watch_Dogs", "ShapeShifter", "House of 1000 Doors: The Palm of Zoroaster Collector's Edition", "UltraGoodness", "BioShock Remastered", "Paranormal State: Poison Spring Collector's Edition", "The Last Door: Season 2 - Collector's Edition", "ARCADE GAME SERIES: PAC-MAN", "Infected: The Twin Vaccine - Collector's Edition", "Lost Legends: The Weeping Woman Collector's Edition", "Midnight Mysteries: Witches of Abraham - Collector's Edition", "Small Town Terrors: Galdor's Bluff Collector's Edition", "Small Town Terrors Pilgrim's Hook Collector's Edition", "The Last Door - Collector's Edition", "Twisted Lands Trilogy Collector's Edition"
  · Cambiado al principio el "\\'" que era "_" a ""
  · Se elimina "\\\\" cuando no lo sigue un "/"
  · Añadida una nueva condición cuando termina en número para ver si se cambia o no por el otro hit. Deben tener el mismo número de palabras.
  · "ARCADE GAME SERIES:" se quita al principio
- He restaurado lo de que la longitud debe ser igual (volverá a caer Thief 2 entonces) y la "\\'" a "_" al principio...a ver cómo solucionarlo

10-1-23

- Hechos nuevos cambios en el código para los Collector's edition. 
- Añadida nueva línea cuando el juego es una palabra, que lo busque como hacía antes ademas de modificarlos para juegos como Watch Dogs
- Añadida la info de AppID desde el archivo original. De esta forma se va a poder prescindir de bajar la base de datos de juegos dos veces, ya que el nombre lo cogeremos cuando busquemos el metadato desde Steam
- Obtenemos el dato desde AppID, cogemos desde aquí el nombre final. Si funciona, modificar para que no busque los datos dos veces, prescindir de columna 7...modificar ese campo en el código para que no falle
- Tenemos una última versión de metadato. De aquí mirar los NAs e intetar depurar más esos últimos 300. 
- Pensar corte de exactitud.
- Mirar el cálculo de la columna que se suma número de votos, por qué falla. Arreglado parece...
- Mirar "Risen 2 - Dark Waters"
- Modificar el script. El bloque donde se eliminan partes del nombre puede ser una lista que se va recorriendo. Lo mismo con el bloque donde se pone "Exact"-"No Exact", dejar sólo uno.

11-1-23

- Cambios:
  · Añadido "SEASON UPDATE" y "FINAL EDITION"...Redux, Prelude, Single Player, Legacy Edition...
  · Quitamos ":" cuando es solo una palabra
  · Los juegos que acaben en número como MotoGP13 separamos los números y luego buscamos.
  · Para juegos como Gun'n'zombies, nuevo criterio para encontrarlos
  · Juegos con "ö" y "ã" arreglados
  · Quitado los "()" que están en medio de los nombres
  · Cuando es una sola palabra lo parte en 2 o más a través de las mayúsculas
- Corriendo, comparar con la versión guardada a ver cambios
- Especificar que "Sin registro" es porque tiene ficha pero no tiempo, o el tiempo es menos de 30 min. Los errores son NA, porque no lo encuentra o no tiene ficha.
- C.O.D.E.R.E.D falla! arreglar...Arreglado
- Bajar de aquí cuándo se activaron los juegos: https://store.steampowered.com/account/licenses/

12-1-23

- Pensar cómo descargar info de "licenses" y añadir la info de cuando se compró un juego.
- El nombre se coge de la columna 7, que es con el segundo parseo del la tabla inicial áun (más fancy, con R y TM). Ver cómo aparece en Steam, si como la columna 7 o la 10. Mirar "Gauntlet". Quizá es más práctico dejar el 10, así te ahorras el 7 y sus prosibles problemas.

13-1-23

- Repaso de tabla y viendo cuáles son los que están mal asignados
- El porcentaje de asignaciones erroneas es de 29/3116 (dataset 11-1-23)
- El número de NA (no hay ficha o no es capaz de encontrar el real) es de 275/3116 (dataset 11-1-23).
- Por hacer ahora, apuntado de otros días:
  · Descargar info de "licenses"
  · Modificar el script. El bloque donde se eliminan partes del nombre puede ser una lista que se va recorriendo. Lo mismo con el bloque donde se pone "Exact"-"No Exact", dejar sólo uno.
  · Seguro que no se puede generar el 7 desde el 1? - stringi::stri_trans_general(x, "Hangul-Latin") 
  X · Añadir info de los juego que están logreados al 100%: "https://steamcommunity.com/id/marko_pakete/games/?tab=perfect"

14-1-23

- Ver si hay diferencias en 0 en east new world y el que me dijo Andres.
- Me falta logro de Demo de Resident?
- Se ve puntuacion usuarios directamente?
- Poner también dato de tiempo jugado.

15-1-23

- Puesto tiempo de juego...aunque no va si no se ha jugado nunca al juego, arreglar.

16-1-23

- Intentar arreglar el fallo con SteamSpy. Correr este código para ver cómo se comporta:

while(o<10000){
meta_juego<-tryCatch(error = function(cnd) paste("Ha petado en ",o,sep=""),getURL(paste("https://steamspy.com/api.php?request=appdetails&appid=",game_list[i,8],sep=""))) 
o=o+1
print(o)
}

17-1-23

- Cuidado con esto, antes de publicarlo: https://github.com/woctezuma/steamspypi/issues/10
- Añadir información de recursos mínimos

18-1-23

- Desde esta línea: "https://store.steampowered.com/api/appdetails/?cc=EU&appids=" se puede sacar el release date y requisitos mínimos!!
- Vamos metiendo datos de release_date y pc_requirements. Aún faltan removed_games y datos de cuándo se compraron
- Arreglago los ids de release_date y pc_requirements. Ver si ahora va bien.
- Encontrada forma de meter los removed, bajamos info desde steam-tracker. Hay que parsearla ahora.
- Hay que cambiar los apodos a ids de usuario por defecto, si no este último punto buscando removed no funciona
- Qué info se ve de BlackSouls

19-1-23

- Añadido el dato de Removed.
- Hay que correr de nuevo nuestros datos, funcionará bien el tryCatach? comparar con el archivo anterior
- Los ids a buscar (info de usuario) no siempre son los números. Si tiene apodo usar el apodo para descargar la lista de juegos y los que tienen 100% de logros
- Pasamos del dato de licences...dejamos el script así y metemos esa tabla a mano, para interés personal